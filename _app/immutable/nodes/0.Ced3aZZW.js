import"../chunks/DsnmJJEf.js";import{d as Ue,o as ce,s as G,e as re,r as Ge,h as He,a as Ye}from"../chunks/BOOa181H.js";import{p as ve,Z as x,a1 as ee,Y as u,k as e,f as p,a as j,s as w,b as f,c as de,d,r as l,t as B,a0 as ie}from"../chunks/YEsR6uFO.js";import{i as b}from"../chunks/C7VAiwEf.js";import{s as te}from"../chunks/D1LHmu9n.js";import{e as Ie,s as le}from"../chunks/JuV6_9Fc.js";import{i as ue,e as T,S as X}from"../chunks/87qpYtHj.js";const Me=!0,dt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Me},Symbol.toStringTag,{value:"Module"}));function Re(s,a,m){u(a,!e(a)),e(a)&&m()}var je=(s,a)=>{s.stopPropagation(),a()},Be=(s,a)=>{(s.key==="Enter"||s.key===" ")&&(s.stopPropagation(),a())},De=p('<div class="server-switcher-float svelte-1e8km9x"><button class="float-button svelte-1e8km9x" title="Switch Server">ğŸŒ <span class="hide-button svelte-1e8km9x" role="button" tabindex="0" title="Hide server switcher for this session">âœ•</span></button></div>'),Oe=(s,a)=>{(s.key==="Enter"||s.key===" ")&&a()},$e=s=>s.stopPropagation(),Ne=(s,a)=>{s.key==="Escape"&&a()},ze=p('<span class="status mixed-content svelte-1e8km9x">âš ï¸ Test manually</span>'),Fe=p('<span class="status loading svelte-1e8km9x">Testing...</span>'),Ke=p('<span class="status success svelte-1e8km9x">âœ“ Working</span>'),Je=p('<span class="status error svelte-1e8km9x">âœ— Failed</span>'),Qe=(s,a,m)=>a(e(m)),Ve=p('<div class="mixed-content-warning svelte-1e8km9x"><div class="warning-icon svelte-1e8km9x">âš ï¸</div> <div class="warning-text svelte-1e8km9x">Mixed content blocked</div> <button class="test-new-tab-btn svelte-1e8km9x" title="Test server in new tab">Test in New Tab</button></div>'),We=p('<iframe class="svelte-1e8km9x"></iframe>'),Ze=(s,a,m)=>a(e(m)),qe=p('<div><div class="server-info svelte-1e8km9x"><div class="server-name svelte-1e8km9x"> </div> <div class="server-hostname svelte-1e8km9x"> </div> <div class="server-status svelte-1e8km9x"><!></div></div> <div><!></div> <button class="select-btn svelte-1e8km9x"> </button></div>'),Xe=p('<div class="modal-overlay svelte-1e8km9x" role="button" tabindex="0" aria-label="Close server switcher modal"><div class="modal-content svelte-1e8km9x" role="dialog" aria-modal="true" tabindex="0"><div class="modal-header svelte-1e8km9x"><h3 class="svelte-1e8km9x">Choose Server</h3> <button class="close-btn svelte-1e8km9x">Ã—</button></div> <div class="current-server svelte-1e8km9x">Current: <strong> </strong> </div> <div class="servers-grid svelte-1e8km9x"></div></div></div>'),et=p("<!> <!>",1);function tt(s,a){ve(a,!0);let m=x(!1),H=x(!1),k=x(ee([])),_=ee({});ce(async()=>{await ue(),u(k,T.servers,!0),e(k).forEach(t=>{_[t.hostname]="loading"})});function D(){e(k).forEach(t=>{_[t.hostname]="loading"})}function O(t){_[t.hostname]="success"}function $(t){_[t.hostname]="error"}function N(t){if(T.currentServer=t,u(m,!1),P(t)[1]){console.warn("[ServerSwitcher] Switching to a server with different security context. Reloading page.");const n=new URL(`${t.protocol}://${t.hostname}${window.location.pathname}`),g=new URLSearchParams(window.location.search);g.set("SetServer",t.hostname),n.search=g.toString(),n.hash=window.location.hash,window.location.href=n.toString();return}window.location.reload()}function S(){u(m,!1)}function L(){u(H,!0),u(m,!1)}function P(t){if(window){const o=window.isSecureContext,n=t.protocol==="https";return o&&n?["(Secure)",!1]:!o&&n?["(Secure)",!1]:!o&&!n?["(Insecure)",!1]:o&&!n?["(Insecure) Forces switch to different host",!0]:["(Unknown security status)",!1]}else return["(Unknown security status)",!1]}function y(t){if(window){const o=window.isSecureContext,n=t.protocol==="https";return o&&!n}return!1}function z(t){const o=`${t.protocol}://${t.hostname}/test_availability.html`;window.open(o,"_blank","noopener,noreferrer")}var c=et(),h=j(c);{var C=t=>{var o=De(),n=d(o);n.__click=[Re,m,D];var g=w(d(n));g.__click=[je,L],g.__keydown=[Be,L],l(n),l(o),f(t,o)};b(h,t=>{e(H)||t(C)})}var me=w(h,2);{var _e=t=>{var o=Xe();o.__click=S,o.__keydown=[Oe,S];var n=d(o);n.__click=[$e],n.__keydown=[Ne,S];var g=d(n),fe=w(d(g),2);fe.__click=S,l(g);var F=w(g,2),K=w(d(F)),he=d(K,!0);l(K);var we=w(K);l(F);var ae=w(F,2);Ie(ae,21,()=>e(k),J=>J.name,(J,r)=>{var Y=qe();let se;var Q=d(Y),V=d(Q),pe=d(V,!0);l(V);var W=w(V,2),ke=d(W,!0);l(W);var oe=w(W,2),ge=d(oe);{var xe=v=>{var i=ze();f(v,i)},be=v=>{var i=ie(),U=j(i);{var Z=E=>{var R=Fe();f(E,R)},Ae=E=>{var R=ie(),Te=j(R);{var Le=A=>{var q=Ke();f(A,q)},Pe=A=>{var q=Je();f(A,q)};b(Te,A=>{_[e(r).hostname]==="success"?A(Le):A(Pe,!1)},!0)}f(E,R)};b(U,E=>{_[e(r).hostname]==="loading"?E(Z):E(Ae,!1)},!0)}f(v,i)};b(ge,v=>{y(e(r))?v(xe):v(be,!1)})}l(oe),l(Q);var I=w(Q,2);let ne;var Se=d(I);{var ye=v=>{var i=Ve(),U=w(d(i),4);U.__click=[Qe,z,r],l(i),f(v,i)},Ce=v=>{var i=We();B(()=>{te(i,"src",`${e(r).protocol??""}://${e(r).hostname??""}/test_availability.html`),te(i,"title",`Test ${e(r).name??""}`)}),re("load",i,()=>O(e(r))),re("error",i,()=>$(e(r))),Ge(i),f(v,i)};b(Se,v=>{y(e(r))?v(ye):v(Ce,!1)})}l(I);var M=w(I,2);M.__click=[Ze,N,r];var Ee=d(M,!0);l(M),l(Y),B((v,i,U,Z)=>{se=le(Y,1,"server-card svelte-1e8km9x",null,se,v),G(pe,e(r).name),G(ke,i),ne=le(I,1,"iframe-container svelte-1e8km9x",null,ne,U),M.disabled=Z,G(Ee,e(r).hostname===T.currentServer.hostname?"Current":"Select")},[()=>({current:e(r).hostname===T.currentServer.hostname}),()=>P(e(r))[0],()=>({"mixed-content":y(e(r))}),()=>!y(e(r))&&_[e(r).hostname]!=="success"]),f(J,Y)}),l(ae),l(n),l(o),B(()=>{G(he,T.currentServer.name),G(we,` (${window?window.isSecureContext?"Secure":"Insecure":"Unknown"})`)}),f(t,o)};b(me,t=>{e(m)&&t(_e)})}f(s,c),de()}Ue(["click","keydown"]);var at=p('<meta name="use-ga4"/>'),st=p("<!> <!>",1);function ut(s,a){ve(a,!0);let m={"ccported.click":"G-YPK0M57SY4","ccported.github.io":"G-NYC0Q0VKPP",localhost:null},H="G-DJDL65P9Y4",k=x(""),_=x(!1),D=x(!1),O=x(!1),$=x(ee(X.adBlockEnabled)),N=x(!1);ce(()=>{u(D,!0);{ue().then(()=>{u(O,X.adsEnabled,!0),u($,X.adBlockEnabled,!0)}),u(N,T.isAHost(),!0);let c=window.location.hostname;if(console.log("[R][LAYOUT][BASE] Hostname:",c),c in m){const h=m[c];console.log("[R][LAYOUT][BASE] GA4 Code:",h),h?(u(k,h,!0),u(_,!0)):u(_,!1)}else u(k,H),u(_,!0);console.log("[R][LAYOUT][BASE] Using GA4:",e(_),"with ID:",e(k)),e(_)&&e(k)&&S(e(k))}});function S(c){const h=document.createElement("script");h.async=!0,h.src=`https://www.googletagmanager.com/gtag/js?id=${c}`,document.head.appendChild(h);const C=document.createElement("script");C.innerHTML=`
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '${c}');
        `,document.head.appendChild(C)}var L=st();He(c=>{var h=at();B(C=>te(h,"content",C),[()=>String(e(_))]),f(c,h)});var P=j(L);Ye(P,()=>a.children);var y=w(P,2);{var z=c=>{tt(c,{})};b(y,c=>{c(z)})}f(s,L),de()}export{ut as component,dt as universal};
