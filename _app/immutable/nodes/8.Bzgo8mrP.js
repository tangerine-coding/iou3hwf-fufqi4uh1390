import"../chunks/DsnmJJEf.js";import{o as ie,h as re,s as D}from"../chunks/BOOa181H.js";import{p as ce,a1 as le,f as b,t as O,k as e,b as f,c as de,$ as me,d,s as E,Y as p,Z as g,r,a0 as fe,a as pe,A as ve}from"../chunks/YEsR6uFO.js";import{i as j}from"../chunks/C7VAiwEf.js";import{e as Z,i as F}from"../chunks/JuV6_9Fc.js";import{r as ue,s as H}from"../chunks/D1LHmu9n.js";import{b as xe}from"../chunks/CT0gFCUB.js";import{A as G}from"../chunks/BnRXofNu.js";import{N as be}from"../chunks/iEZU9Woh.js";import{C as he,p as _e,g as we,a as ge,q as Ce,r as Pe,u as ye,i as J,n as ke,S as x,o as Ee,v as Se}from"../chunks/87qpYtHj.js";class Q extends he.classBuilder().ep({..._e,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(A,N,C,v){return[we(C,this.serialize,this.deserialize),ge(C,A.getEndpointParameterInstructions()),Ce(C)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(Pe).de(ye).build(){}var $e=b('<div class="big-ad"><!></div>'),ze=b('<div class="small-ad" style="margin-bottom: 12px;"><!></div>'),Be=b('<a download="" class="svelte-7wxcfx"> </a>'),Oe=b('<a class="svelte-7wxcfx"> </a>'),je=b('<li class="svelte-7wxcfx"><!> ></li>'),Ae=b('<section class="svelte-7wxcfx"><h2 class="svelte-7wxcfx"> </h2> <!> <ul class="svelte-7wxcfx"></ul></section>'),Le=b('<div><!> <div class="container svelte-7wxcfx"><input type="text" class="search svelte-7wxcfx"/> <!> <!></div></div>');function qe(M,A){ce(A,!0);const N=["dos","dreamcast"];let C=g(!0),v=le({}),S=g(""),L=g(0);function I(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/)}let P=g(null),X=g(!1),h=g(!1);const T={"ccported.github.io":{big:"c024666e-e810-47df-833e-b260321b4d84",small:"c2522ff2-7549-433b-a689-0cd63517722c"},"ccported.click":{big:"dfa19ddf-2c4c-42ac-8056-3419d7b2ecf3",small:"ce76eb8c-b859-4060-90bb-ba1089d73e67"}};async function ee(){if(x.s3Client||await J(),!x.s3Client)throw new Error("S3 Client not initialized");const t=x.s3Client,a=new Q({Bucket:"ccportedroms",Delimiter:"/"}),i=(await t.send(a)).CommonPrefixes||[];for(const o of i){const n=o.Prefix?.replace("/",""),c=new Q({Bucket:"ccportedroms",Prefix:o.Prefix}),R=(await t.send(c)).Contents||[];for(const B of R){const y=B.Key;if(y!==o.Prefix&&y&&n){const _=y.split("/").pop();_&&(v[n]=v[n]||[],v[n].push({console:n,name:Se(_?.split(".")[0]||"Unknown"),filename:_||"unknown"}),p(L,e(L)+1))}}}}ie(async()=>{if(await J(),ee().then(()=>{p(C,!1)}),await ke(),p(X,x.adBlockEnabled,!0),p(h,x.adsEnabled,!0),e(h)){const t=window.location.hostname;t in T&&p(P,T[t],!0),(async()=>{const a=await Ee();if(!a){p(h,!1),x.adsEnabled=!1;return}const s=a.find(i=>i.hostname===t);if(s&&s.acode){const i=`ad-script-${s.acode}`;if(document.getElementById(i))return;const o=document.createElement("script");o.id=i,o.src=`//monu.delivery/site/${s.acode}`,o.setAttribute("data-cfasync","false"),o.defer=!0,document.head.appendChild(o)}else p(h,!1),x.adsEnabled=!1})()}});function U(t){if(!e(S).trim())return t;const a=I(e(S));return t.filter(s=>{const i=I(s.name),o=I(s.filename);return a.every(n=>i.some(c=>c.includes(n))||o.some(c=>c.includes(n)))})}var V=Le();re(t=>{me.title="ROMs | CCPorted"});var q=d(V);be(q,{});var K=E(q,2),$=d(K);ue($);var Y=E($,2);{var te=t=>{var a=$e(),s=d(a);G(s,{get slotId(){return e(P).big}}),r(a),f(t,a)};j(Y,t=>{e(h)&&e(P)&&t(te)})}var ae=E(Y,2);Z(ae,17,()=>Object.keys(v),F,(t,a)=>{var s=fe(),i=pe(s);{var o=n=>{var c=Ae(),z=d(c),R=d(z,!0);r(z);var B=E(z,2);{var y=u=>{var m=ze(),k=d(m);G(k,{get slotId(){return e(P).small}}),r(m),f(u,m)};j(B,u=>{e(h)&&e(P)&&u(y)})}var _=E(B,2);Z(_,21,()=>U(v[e(a)]),F,(u,m)=>{var k=je(),se=d(k);{var oe=w=>{var l=Be(),W=d(l);r(l),O(()=>{H(l,"href",`https://ccportedroms.s3.amazonaws.com/${e(a)}/${e(m).filename}`),D(W,`${e(m).name??""} (Download)`)}),f(w,l)},ne=w=>{var l=Oe(),W=d(l,!0);r(l),O(()=>{H(l,"href",`/emulator?core=${e(a)}&rom=${e(m).filename}`),D(W,e(m).name)}),f(w,l)};j(se,w=>{N.includes(e(a))?w(oe):w(ne,!1)})}ve(),r(k),f(u,k)}),r(_),r(c),O(u=>D(R,u),[()=>e(a).toUpperCase()]),f(n,c)};j(i,n=>{U(v[e(a)]).length&&n(o)})}f(t,s)}),r(K),r(V),O(()=>H($,"placeholder",`Search ${e(L)??""} ROMs...`)),xe($,()=>e(S),t=>p(S,t)),f(M,V),de()}export{qe as component};
